# Technology Stack

**Analysis Date:** 2025-01-25

## Languages

**Primary:**
- R (>= 4.1.0) - Package language, all core functionality

## Runtime

**Environment:**
- R runtime (version 4.1.0+)

**Package Manager:**
- R package system with `devtools` for development
- Dependencies managed via `DESCRIPTION` file

## Frameworks

**Core:**
- R Base packages (stats, splines, utils)

**HRF (Hemodynamic Response Functions):**
- `fmrihrf` (>= 0.1.0) - Imported package providing HRF basis functions and sampling frame utilities

**Data Manipulation:**
- `dplyr` - Data frame manipulation and tidyverse integration
- `tidyr` - Data reshaping and pivoting
- `purrr` - Functional programming utilities
- `tibble` - Modern data frame format

**Validation & Error Handling:**
- `assertthat` - Assertion library for input validation
- `rlang` - Low-level language and metaprogramming utilities (formula manipulation, evaluation)
- `stringr` - String manipulation utilities

**Matrix Operations:**
- `Matrix` - Sparse and dense matrix operations for design matrix construction

**Visualization:**
- `ggplot2` - Static visualization
- `plotly` - Interactive visualization

**UI/Output:**
- `cli` - Command-line interface with progress bars and styled output

## Key Dependencies

**Critical (Required):**
- `fmrihrf` (>= 0.1.0) - Core dependency for HRF functions. All hemodynamic response models depend on this. Without it, package cannot construct design matrices with HRFs.
- `Matrix` - Used for sparse matrix operations in design matrix construction
- `stats` - R base package for statistical functions (model.matrix, poly, etc.)
- `rlang` - Essential for formula parsing and expression evaluation

**Infrastructure:**
- `dplyr`, `tidyr`, `purrr`, `tibble` - Tidyverse ecosystem for data manipulation
- `assertthat` - Runtime validation of function inputs
- `stringr` - String processing for naming and validation
- `cli` - Progress reporting during long operations

**Visualization:**
- `ggplot2` - Static design matrix and HRF visualizations
- `plotly` - Interactive exploration of design matrices and contrasts

**Documentation & Testing (Suggests):**
- `testthat` - Unit testing framework
- `knitr` - Vignette processing
- `rmarkdown` - Markdown documentation
- `covr` - Code coverage analysis

## Configuration

**Environment:**
- R configuration: Uses R's default library paths
- Development: Managed via `devtools` commands
- No explicit .env files or environment variable configuration required for core functionality

**Build:**
- `DESCRIPTION` file contains package metadata and dependencies
- `NAMESPACE` file declares exports and imports (auto-generated by roxygen2)
- `_pkgdown.yml` - Website/documentation configuration
- Package version: 0.5.0
- RoxygenNote: 7.3.3 (roxygen2 version for documentation generation)

**Documentation:**
- roxygen2 comments in source files (R/*)
- Vignettes: Built with knitr, styled with `vignettes/albers.css`
- pkgdown theme: albersdown (custom CSS package)
- Website template: Bootstrap 5

## Platform Requirements

**Development:**
- R >= 4.1.0
- devtools package for package development
- roxygen2 for documentation generation (version 7.3.3)
- knitr/rmarkdown for vignette building
- testthat for test execution

**Production:**
- R >= 4.1.0
- All packages listed in `Imports` section of DESCRIPTION must be available
- No external system dependencies or C/Fortran compilation required
- Pure R implementation

## Installation

```r
# From GitHub (development)
devtools::install_github("bbuchsbaum/fmridesign")

# From local source
devtools::install()
```

## Development Workflow

```r
# Load for development
devtools::load_all()

# Generate documentation
devtools::document()

# Run tests
devtools::test()

# Check package
devtools::check()

# Build vignettes
devtools::build_vignettes()

# Code coverage
covr::package_coverage()
```

---

*Stack analysis: 2025-01-25*
