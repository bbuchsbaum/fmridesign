% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validate.R
\name{validate_contrasts}
\alias{validate_contrasts}
\title{Validate contrast weights against a design matrix or event model}
\usage{
validate_contrasts(x, weights = NULL, tol = 1e-08)
}
\arguments{
\item{x}{An \code{event_model} or a numeric matrix/data.frame design matrix.}

\item{weights}{Optional contrast weights. May be a numeric vector (t-contrast),
a numeric matrix (F-contrast with columns as contrast vectors), or a named
list mapping names to vectors/matrices. If \code{NULL} and \code{x} is an \code{event_model},
all attached t- and F-contrasts are validated.}

\item{tol}{Numeric tolerance for zero checks. Default \code{1e-8}.}
}
\value{
A data.frame with one row per validated contrast column and the
following columns: \code{name}, \code{type} ("t" or "F"), \code{estimable},
\code{sum_to_zero}, \code{orthogonal_to_intercept}, \code{full_rank} (F only), and
\code{nonzero_weights}.
}
\description{
Provides basic diagnostics for t- and F-contrasts once the design matrix
is available. You can either pass an \code{event_model} (to validate all attached
contrasts) or a design matrix plus custom weights.
}
\details{
Checks include:
\itemize{
\item Estimability: whether each contrast column lies in the row space of \code{X}.
\item Sum-to-zero: whether the weights sum to ~0 (t-contrasts only).
\item Intercept orthogonality: whether weights on intercept-like columns are ~0.
\item Full-rank (F only): whether an F-contrast matrix has full column rank.
}
}
\examples{
# Create a simple event model
des <- data.frame(
  onset = c(0, 10, 20, 30),
  run = 1,
  cond = factor(c("A", "B", "A", "B"))
)
sframe <- fmrihrf::sampling_frame(blocklens = 40, TR = 1)
emodel <- event_model(onset ~ hrf(cond), data = des, block = ~run,
                      sampling_frame = sframe)

# Validate all attached contrasts on a model
res <- validate_contrasts(emodel)

# Validate a custom vector against a model
v <- rep(0, ncol(design_matrix(emodel)))
v[1] <- 1
v[2] <- -1
res2 <- validate_contrasts(emodel, weights = v)

}
