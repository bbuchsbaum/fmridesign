% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/design_generics.R, R/event_vector.R
\name{convolve}
\alias{convolve}
\alias{convolve.event_term}
\title{Convolve events with a hemodynamic response function}
\usage{
convolve(
  x,
  hrf,
  sampling_frame,
  drop.empty = TRUE,
  summate = TRUE,
  precision = 0.1,
  ...
)

\method{convolve}{event_term}(
  x,
  hrf,
  sampling_frame,
  drop.empty = TRUE,
  summate = TRUE,
  precision = 0.3,
  ...
)
}
\arguments{
\item{x}{The events to convolve.}

\item{hrf}{The hemodynamic response function.}

\item{sampling_frame}{The sampling frame.}

\item{drop.empty}{Logical indicating whether to drop columns with all zeros.}

\item{summate}{Logical indicating whether to sum convolved signals.}

\item{precision}{Numeric specifying the temporal precision for convolution.}

\item{...}{Additional arguments.}
}
\value{
A matrix-like (often tibble) of convolved regressors.
}
\description{
Convolve events with a hemodynamic response function
}
\examples{
# Create event data and event term
data <- data.frame(
  onset = c(5, 25, 45),
  condition = factor(c("A", "B", "A")),
  run = rep(1, 3)
)
sframe <- fmrihrf::sampling_frame(blocklens = 60, TR = 2)

# Create an event term
ev_term <- event_term(condition, 
                     onsets = data$onset,
                     durations = rep(2, 3), 
                     data = data)

# Create HRF basis
hrf_basis <- fmrihrf::spmhrf(fmrihrf::TR(sframe))

# Convolve events with HRF
convolved <- convolve(ev_term, hrf_basis, sframe, precision = 0.1)
dim(convolved)
head(convolved, 10)

# With different precision
convolved_fine <- convolve(ev_term, hrf_basis, sframe, precision = 0.05)
dim(convolved_fine)

# Without summation (if applicable)
\dontrun{
convolved_no_sum <- convolve(ev_term, hrf_basis, sframe, 
                            summate = FALSE, precision = 0.1)
}
}
