% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hrf-formula.R
\name{weighted_hrf_gen}
\alias{weighted_hrf_gen}
\title{Create weighted HRF generator from list columns}
\usage{
weighted_hrf_gen(
  times_col = "sub_times",
  weights_col = "sub_weights",
  relative = FALSE,
  method = "constant",
  normalize = FALSE
)
}
\arguments{
\item{times_col}{Character; name of the column containing sub-event times (relative or absolute).}

\item{weights_col}{Character; name of the column containing sub-event weights.}

\item{relative}{Logical; if TRUE, times are relative to event onset; if FALSE, times are absolute
and will be converted to relative by subtracting the onset. Default FALSE (absolute times).}

\item{method}{Character; interpolation method for \code{hrf_weighted()}. Default "constant".}

\item{normalize}{Logical; whether to normalize the weighted HRF. Default FALSE.}
}
\value{
A function that takes an event data frame and returns a list of HRF objects.
}
\description{
Creates a generator function for use with the \code{hrf_fun} parameter in \code{hrf()}.
The generator produces weighted impulse HRFs from columns containing lists
of sub-event times and weights.
}
\examples{
\dontrun{
# Events with internal temporal structure
trial_data <- data.frame(
  onset = c(0, 20),
  sub_times = I(list(c(0, 1, 2), c(0, 3, 6))),  # Times relative to onset
  sub_weights = I(list(c(0.2, 0.5, 0.3), c(0.1, 0.6, 0.3))),
  run = 1
)
sf <- fmrihrf::sampling_frame(blocklens = 50, TR = 2)

emod <- event_model(
  onset ~ hrf(onset, hrf_fun = weighted_hrf_gen("sub_times", "sub_weights", relative = TRUE)),
  data = trial_data, block = ~run, sampling_frame = sf
)
}

}
\seealso{
\code{\link[=boxcar_hrf_gen]{boxcar_hrf_gen()}} for duration-based boxcar HRFs
}
